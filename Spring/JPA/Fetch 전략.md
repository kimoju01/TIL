# [JPA] Fetch ì „ëµ

> JPAì—ëŠ” ë‘ ê°€ì§€ ë¡œë”© ê¸°ë²•ì´ ì¡´ì¬í•œë‹¤.
> 1. ì¦‰ì‹œ ë¡œë”©(fetch = FetchType.EAGER) : ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•  ë•Œ ì—°ê´€ëœ ì—”í‹°í‹°ë„ í•¨ê»˜ ì¡°íšŒí•œë‹¤.
> 2. ì§€ì—° ë¡œë”©(fetch = FetchType.LAZY) : ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ì‹¤ì œ ì‚¬ìš©í•  ë•Œ ì¡°íšŒí•œë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ í•œ ê²Œì‹œê¸€ì´ ìˆë‹¤ê³  í•˜ì.
```
ğŸ€
ì‘ì„±ì : kim
ì œëª© : ì•ˆë…•í•˜ì„¸ìš”
ë‚´ìš© : ë°˜ê°€ì›Œìš”

* ëŒ“ê¸€(í¼ì¹˜ê¸°)
> ë°˜ê°‘ìŠµë‹ˆë‹¤
> ì €ë„ ë°˜ê°€ì›Œìš”
```

**í•œ ëª…ì˜ ìœ ì €ëŠ” ì—¬ëŸ¬ ê°œì˜ ê²Œì‹œê¸€**ì„ ì‘ì„±í•  ìˆ˜ ìˆê³  **í•˜ë‚˜ì˜ ê²Œì‹œê¸€ì—ëŠ” ì—¬ëŸ¬ ê°œì˜ ëŒ“ê¸€**ì´ ì‘ì„±ë  ìˆ˜ ìˆë‹¤.

ê·¸ë ‡ë‹¤ë©´ ê²Œì‹œê¸€ê³¼ ìœ ì €ëŠ” **ManyToOne** ê´€ê³„ì´ê³  (Many = Board, One = User)   
ê²Œì‹œê¸€ê³¼ ëŒ“ê¸€ì€ **OneToMany** ê´€ê³„ì´ë‹¤. (One = Board, Many = Reply)

Board EntityëŠ” ì•„ë˜ì™€ ê°™ë‹¤.
```java
@Entity
public class Board {

  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Long id;
  
  @Column(nullable = false)
  private String title;
  
  @Lob
  private String content;
  
  @ManyToOne(fetch = FetchType.EAGER)
  @JoinColumn(name = "userId")
  private User user;
  
  @OneToMany(mappedBy = "board", fet = FetchType.LAZY)
  private List<Reply> reply;

}
```

> âœ”   
> *__@ManyToOne(fetch = FetchType.EAGER)__   
> @JoinColumn(name = "userId")   
> private User user;*   
> - Board í…Œì´ë¸”ì„ ì¡°íšŒ(Select)í–ˆì„ ë•Œ, í•´ë‹¹í•˜ëŠ” ìœ ì € ì •ë³´ë¥¼ ì¦‰ì‹œ ê°€ì ¸ì˜¨ë‹¤  
> - ì™œ ì¦‰ì‹œ ê°€ì ¸ì˜¤ëŠ”ê°€? ê²Œì‹œê¸€ì„ ì¡°íšŒí–ˆì„ ë•Œ í•´ë‹¹í•˜ëŠ” ìœ ì € ì •ë³´ëŠ” í•œëª… ë¿ì´ë‹ˆê¹Œ ë¶€ë‹´ì´ ëœ í•˜ë‹¤!
> - ê·¸ë ‡ê¸° ë•Œë¬¸ì— @ManyToOneê³¼ @OneToOneì˜ ê¸°ë³¸ fetch ì „ëµì€ EAGER íƒ€ì…ì´ë‹¤. (êµ³ì´ ì ì§€ ì•Šì•„ë„ EAGERë¡œ ì ìš©ëœë‹¤.)   

> âœ”   
> *__@OneToMany(mappedBy = "board", fetch = FetchType.LAZY)__   
> private List<Reply> reply;*   
> - @OneToMany, @ManyToManyì˜ ê¸°ë³¸ fetch ì „ëµì€ LAZY íƒ€ì…ì´ë‹¤
> - Board í…Œì´ë¸”ì„ ì¡°íšŒí–ˆì„ ë•Œ, í•´ë‹¹í•˜ëŠ” ëŒ“ê¸€ì´ 1ê°œ ì¼ ìˆ˜ë„ ìˆì§€ë§Œ 10000ê°œ ì¼ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì´ë‹¤
> - í¼ì¹˜ê¸° ê¸°ëŠ¥ìœ¼ë¡œ ëŒ“ê¸€ì„ ë¶ˆëŸ¬ì˜¨ë‹¤ë©´ LAZY íƒ€ì…ì„ ì‚¬ìš©í•´ë„ ê´œì°®ì§€ë§Œ í¼ì¹˜ê¸° ê¸°ëŠ¥ì´ ì—†ê³  ë°”ë¡œ ëŒ“ê¸€ì´ ë‚˜íƒ€ë‚œë‹¤ë©´ EAGER íƒ€ì…ìœ¼ë¡œ ë°”ê¿”ì„œ ì‚¬ìš©í•  ê²ƒ

 
 
## ê²°ë¡ 
- ì»¬ë ‰ì…˜ì—ì„œëŠ” ë¬´ì¡°ê±´ ì§€ì—°ë¡œë”©ì„ ì‚¬ìš©í•˜ê³  ë‹¨ì¼ ì—”í‹°í‹°ëŠ” ì¦‰ì‹œ ë¡œë”©ì„ ì‚¬ìš©í•œë‹¤
- ê·¸ëŸ¬ë‚˜ ëª¨ë“  ì—°ê´€ê´€ê³„ì— ì§€ì—°ë¡œë”©ì„ ì‚¬ìš©í•˜ê³  í•„ìš”í•œ ê³³ì—ë§Œ ì¦‰ì‹œ ë¡œë”©ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ëŠ” ê²ƒì´ ì„±ëŠ¥ì ìœ¼ë¡œ ì¢‹ë‹¤
